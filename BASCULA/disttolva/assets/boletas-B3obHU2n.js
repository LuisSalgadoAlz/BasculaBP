import{Y as Es,j as e,Z as As,l as Be,_ as Bs,$ as Ls,a0 as Rs,a1 as Vs,r as c,S as Le,N as Re,a2 as ye,a3 as zs,a4 as Gs,a5 as Ve,o as Y,a6 as Ks,s as we,p as Hs,q as Ws,a7 as Zs,a8 as $s,a9 as Us,aa as qs,A as Ys,C as _s,ab as Xs}from"./index-DqpGZtZS.js";import{B as $e,P as ze,e as ge,f as Js}from"./buttons-DpToUdmo.js";import{a as Qs,b as bs,S as M,I,P as ea,T as sa,c as aa,d as Ue,e as ta,f as ra}from"./inputs-Cck7JMqO.js";import{i as Ge,n as Ke,a as k,c as y,g as te,h as na,b as Se,d as Ce,j as ca,k as ia,l as oa,m as J,o as ae}from"./boletas-CuDdO80P.js";import{C as je}from"./card-header-DbjG0--J.js";import{b as qe,c as fe,d as q,e as Ne,f as la,h as He,A as da,i as ma,j as xa,k as ua,v as ha,p as pa,l as We,m as ga,n as ja,u as fa,o as Na,q as va,r as ya}from"./formDataBoletas-DQqCj0-0.js";import{c as wa,d as Sa}from"./index-CWU1N5XH.js";import{T as Ca,t as ve}from"./index-LGuQLVg7.js";import"./react-select.esm-DAYL3PhH.js";import"./index-BQG4GO_-.js";import"./regex-DItgc77W.js";function Pa(x){return Es({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17.28 9.28a.75.75 0 0 0-1.06-1.06l-5.97 5.97-2.47-2.47a.75.75 0 0 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l6.5-6.5Z"},child:[]},{tag:"path",attr:{d:"M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"},child:[]}]})(x)}const Ma=["GRANZA BRUTA NACIONAL","GRANZA"],Ze=({datos:x=[{}],fun:n,tipo:s=0,funCancel:o,funReimprimir:a})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"relative overflow-x-auto min-h-[400px]",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-700 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-[#FFFDF5]",children:e.jsxs("tr",{children:[Object.keys(x[0]).map((u,w)=>w===0?null:e.jsx("th",{scope:"col",className:"px-6 py-3",children:u},w)),s==0&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Reimprimir"}),s==0&&e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Cancelar"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:s==0?"Salida":"Detalles"})]})}),e.jsx("tbody",{children:x.map((u,w)=>e.jsxs("tr",{className:"bg-white border-b  border-gray-200 hover:bg-[#FDF5D4]",children:[Object.values(u).map((t,f)=>f!=0&&e.jsx("td",{className:"px-6 py-3 text-gray-700",children:f==0?"":s==1?f==2?t=="Entrada"?e.jsxs("span",{className:"flex items-center gap-1 font-bold",children:[e.jsx(Qs,{}),t]}):e.jsxs("span",{className:"flex items-center gap-1 font-bold",children:[e.jsx(bs,{}),t]}):f==8?t=="Completo(Fuera de tolerancia)"?e.jsxs("span",{className:"text-red-700 font-black flex items-center gap-1",children:[e.jsx(As,{className:"text-lg font-black"}),"Desviada"]}):t=="Cancelada"?e.jsxs("span",{className:"text-yellow-800 font-black flex items-center gap-1",children:[e.jsx(Be,{className:"text-lg font-black"}),t]}):e.jsxs("span",{className:"text-green-700 font-black flex items-center gap-1",children:[e.jsx(Pa,{className:"text-lg font-black"}),t]}):t:t},f)),s==0&&e.jsx("td",{className:"py-3 text-center",children:Ma.includes(u==null?void 0:u.Producto)?e.jsx("button",{className:"font-medium text-gray-800 hover:underline text-center",onClick:()=>a(u),children:e.jsx("span",{className:"text-center",children:e.jsx(Bs,{className:"text-2xl"})})}):e.jsx("button",{className:"font-medium text-gray-800 hover:underline text-center",children:e.jsx("span",{className:"text-center",children:e.jsx(Ls,{className:"text-2xl"})})})}),s==0&&e.jsx("td",{className:"py-3 text-center",children:e.jsx("button",{className:"font-medium text-gray-800 hover:underline text-center",onClick:()=>o(u),children:e.jsx("span",{className:"text-center",children:e.jsx(Be,{className:"text-2xl"})})})}),e.jsx("td",{className:"py-3 text-center",children:e.jsx("button",{className:"font-medium text-gray-800 hover:underline text-center",onClick:()=>n(u),children:e.jsx("span",{className:"text-center",children:s==0?e.jsx(Rs,{className:"text-2xl"}):e.jsx(Vs,{className:"text-2xl"})})})})]},w))})]})})}),ka=x=>{const{boletas:n,hdlOut:s,isLoad:o,setSearch:a,isLoadCompletadas:u,setSearchDate:w,pagination:t,setPagination:f,handlePagination:C,completadas:d,handlePaginationCompletadas:l,hdlOpenDetails:r,hdlCancel:j,funReimprimir:D}=x,[v,T]=c.useState(!1),S=O=>{a(O.target.value),f(1)},E=O=>{w(O.target.value),f(1)},m=()=>{T(!0),f(1)},p=()=>{T(!1),f(1)},g=()=>v?u&&!d?e.jsx(Le,{}):!(d!=null&&d.data)||d.data.length===0?e.jsx(Re,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{datos:d.data,fun:r,tipo:1}),e.jsx("div",{className:"mt-3",children:d.pagination.totalPages>1&&e.jsx(ze,{pg:t,sp:f,hp:l,dt:d})})]}):o&&!n?e.jsx(Le,{}):!(n!=null&&n.data)||n.data.length===0?e.jsx(Re,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{datos:n.data,fun:s,funCancel:j,funReimprimir:D}),e.jsx("div",{className:"mt-3",children:n.pagination.totalPages>1&&e.jsx(ze,{pg:t,sp:f,hp:C,dt:n})})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"filtros grid grid-rows-1 grid-cols-5 grid-flow-col gap-2 max-md:grid-rows-2 max-md:grid-cols-2 max-sm:grid-rows-2 max-sm:grid-cols-1",children:[e.jsx("input",{className:"p-2.5 text-sm font-medium text-gray-600  rounded-lg border border-gray-200 col-span-full",type:"text",placeholder:"Buscar boletas por ID, placas o motorista...",onChange:S}),e.jsx("input",{className:"p-2.5 text-sm font-medium text-gray-600  rounded-lg border border-gray-200 max-sm:hidden",type:"date",onChange:E}),e.jsx($e,{name:"Exportar"})]}),e.jsxs("div",{className:"filtros grid grid-rows-1 grid-flow-col",children:[e.jsx("button",{onClick:p,className:v==!1?Ge:Ke,children:"Pendientes"}),e.jsx("button",{onClick:m,className:v==!0?Ge:Ke,children:"Completadas"})]}),e.jsx("div",{className:"mt-4",children:g()})]})},Pe=["Transportes","Placa","Motoristas"],Ta=({pn:x,hdlClose:n,unidad:s="lb"})=>{const[o,a]=c.useState(0);return c.useEffect(()=>{const u=setTimeout(()=>{a(parseFloat(x))},50);return()=>clearTimeout(u)},[x]),e.jsx(Y.div,{className:"fixed inset-0 flex items-center justify-center bg-opa-50 bg-opacity-60 z-50 p-4 backdrop-blur-sm",...$s,children:e.jsxs(Y.div,{className:"bg-white w-full max-w-md rounded-xl shadow-2xl overflow-hidden",...Us,children:[e.jsxs("div",{className:"bg-[#5A3F27] text-white px-6 py-4 flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center",children:[e.jsx(qs,{className:"mr-2 text-2xl"}),"Detalle de Peso"]}),e.jsx("button",{className:"text-white hover:bg-[#795e47] p-1 rounded-full transition-colors",onClick:n,"aria-label":"Cerrar",children:e.jsx(we,{className:"text-3xl"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col mb-6",children:[e.jsx("div",{className:"text-gray-600 text-sm uppercase tracking-wide mb-1",children:"Peso Neto"}),e.jsxs("div",{className:"flex items-baseline",children:[e.jsx(Y.span,{className:"text-4xl font-bold text-gray-800",initial:{opacity:0},animate:{opacity:1},children:o.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("span",{className:"ml-2 text-xl text-gray-500",children:s})]})]}),e.jsx("div",{className:"bg-gray-100 rounded-lg py-4 mb-6",children:e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("p",{children:[e.jsx("strong",{children:"Nota:"})," El peso neto corresponde al peso final después de restar el peso bruto y tara."]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:n,className:"bg-[#5A3F27] hover:bg-[#9c7c60] text-white py-2 px-6 rounded-lg font-medium transition-colors",children:"Aceptar"})})]})]})})},Ia=({hdlClose:x,hdlChange:n,fillData:s,formBol:o,boletas:a,hdlSubmit:u,clean:w,isLoading:t,proceso:f})=>{const[C,d]=c.useState("00lb"),l=s==null?void 0:s.Clientes.filter(({id:m})=>m!=-999),[r,j]=c.useState(!1),[D,v]=c.useState(0),T=()=>{o(m=>({...m,pesoOut:C.replaceAll("lb","")}))},S=()=>{j(!1)},E=async()=>{const m=(a==null?void 0:a.pesoOut)-(a==null?void 0:a.pesoIn);v(m),j(!0)};return c.useEffect(()=>{const m=new WebSocket(ye);return m.onmessage=p=>{const g=p.data;d(g)},m.onerror=()=>{d("No conectada")},()=>{m.close()}},[]),e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4 sm:p-6 min-h-screen bg-opa-50",children:[e.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-2xl p-2 shadow-lg sm:w-[90%] md:w-[80%] lg:w-[60%] max-h-[95vh] overflow-y-auto boletas border-8 border-white",children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Boleta tipo: Casulla"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Creación de entrada y salida de material del ",new Date().toLocaleDateString()]})]}),e.jsx("div",{className:"my-2 p-2 bg-gray-100 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 max-sm:text-sm",children:"Peso en tiempo real báscula:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900 max-sm:text-sm",children:C})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 p-2 place-content-center",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-2 sm:grid-cols-2 ",children:[e.jsx(M,{classCss:k,name:"Proceso",data:s.Proceso,fun:n,val:a==null?void 0:a.Proceso,stt:!0}),e.jsx(M,{classCss:k,name:"Socios",data:l,fun:n,stt:a.Proceso===""},w),(a==null?void 0:a.Socios)==-998&&e.jsx(I,{data:y,name:"Cliente",fun:n}),(a==null?void 0:a.Socios)==-999&&e.jsx(I,{data:y,name:"Proveedor",fun:n}),Pe.map(m=>(a==null?void 0:a.Socios)!=-998&&(a==null?void 0:a.Socios)!=-999?e.jsx(M,{classCss:k,name:m,data:s[m],fun:n},m):e.jsx(I,{data:y,name:m,fun:n,val:a==null?void 0:a[m]},m)),e.jsx(M,{classCss:k,name:"Producto",data:s.Producto,fun:n})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 place-content-start",children:[e.jsx(M,{classCss:k,name:"Movimiento",data:s.FleteS,fun:n,val:a==null?void 0:a.Movimiento,stt:!0}),e.jsx(Ue,{bol:a,hdl:n,fill:s,tipo:f}),e.jsx(ra,{fun:T,hdlChange:n,val:a}),e.jsx(I,{data:y,name:"Observaciones",fun:n})]})]}),e.jsx("button",{onClick:E,className:te,children:"Previsualizar"}),e.jsx("hr",{className:"text-gray-300 mt-1"}),e.jsxs("div",{className:"mt-3 px-3 grid grid-cols-2 gap-2 justify-between max-sm:grid-rows-3 max-sm:grid-cols-1",children:[e.jsx("button",{onClick:x,className:Se,disabled:t,children:"Cancelar"}),e.jsx("button",{onClick:u,className:Ce,disabled:t,children:t?"Guardando...":"Guardar"})]})]}),r&&e.jsx(Ta,{pn:D,hdlClose:S})]})},Da=({hdlClose:x,hdlChange:n,fillData:s,formBol:o,boletas:a,hdlClean:u,hdlSubmit:w,clean:t,isLoading:f,setAddMarchamos:C,marchamos:d})=>{const[l,r]=c.useState("00lb"),[j,D]=c.useState(!1),[v,T]=c.useState(!1),S={setAddMarchamos:C,marchamos:d,setOpenMarchamos:T},E=()=>{o(g=>({...g,pesoIn:parseInt(l.replaceAll("lb",""))}))},m=g=>{["e","E","+","-",".",","].includes(g.key)&&g.preventDefault()};c.useEffect(()=>{const g=new WebSocket(ye);return g.onmessage=O=>{r(O.data)},g.onerror=()=>r("No conectada"),()=>g.close()},[]);const p=()=>(a==null?void 0:a.Socios)==-998||(a==null?void 0:a.Socios)==-999?ia:s.Origen;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opa-50 p-4",children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl p-4 shadow-2xl max-h-[95vh] overflow-y-auto border border-gray-300 space-y-1",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Boletas"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Entrada/Salida de material del ",new Date().toLocaleDateString()]})]}),e.jsxs("div",{className:"p-3 bg-gray-100 rounded-lg border text-base font-medium text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Peso en tiempo real báscula:"}),e.jsx("span",{className:"font-bold text-gray-900",children:l})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-2 gap-y-4 place-content-center",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(M,{classCss:k,name:"Proceso",data:s.Proceso,fun:n})}),e.jsxs("div",{className:"col-span-2 space-y-3 border-2 border-gray-200 rounded-md w-full p-1",children:[e.jsx("button",{className:"p-2 bg-gray-200 rounded-sm w-full flex items-center gap-2",onClick:()=>D(!1),children:e.jsx("span",{className:"text-sm",children:"Informacion Socio"})}),(!j||(a==null?void 0:a.Proceso)===1)&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 space-y-1",children:[e.jsx(M,{classCss:k,name:"Socios",data:s.Clientes,fun:n,val:a==null?void 0:a.Socios,stt:(a==null?void 0:a.Proceso)===""},t),(a==null?void 0:a.Socios)===-998&&e.jsx(I,{data:y,name:"Cliente",fun:n,val:a==null?void 0:a.Cliente}),(a==null?void 0:a.Socios)===-999&&e.jsx(I,{data:y,name:"Proveedor",fun:n,val:a==null?void 0:a.Proveedor}),Pe.map(g=>(a==null?void 0:a.Socios)!==-998&&(a==null?void 0:a.Socios)!==-999?e.jsx(M,{classCss:k,name:g,data:s[g],fun:n,val:a[g],stt:(a==null?void 0:a.Proceso)===""},g):e.jsx(I,{data:y,name:g,fun:n,val:g==="Transportes"?"Transportes X":a[g],stt:g==="Transportes"},g)),e.jsx(ea,{fun:E,hdlChange:n,val:a})]})})]}),e.jsxs("div",{className:"col-span-2 space-y-3 border-2 border-gray-200 rounded-md w-full p-1",children:[e.jsxs("button",{className:"p-2 bg-gray-200 rounded-sm w-full flex items-center gap-2",onClick:()=>D(!0),disabled:(a==null?void 0:a.Proceso)!==0,children:[(a==null?void 0:a.Proceso)===0?e.jsx(wa,{className:"text-green-600"}):e.jsx(Sa,{className:"text-red-600"}),e.jsxs("span",{className:"text-sm",children:["Detalles Entradas",(a==null?void 0:a.Proceso)===0&&e.jsx("span",{className:"text-black font-bold",children:": Campos Obligatorios"})," "]})]}),j&&(a==null?void 0:a.Proceso)===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 space-y-1",children:[e.jsx(M,{classCss:k,name:"Movimiento",data:s.Flete,fun:n,val:a==null?void 0:a.Movimiento}),(a==null?void 0:a.Movimiento)===10||(a==null?void 0:a.Movimiento)===11?e.jsx(M,{classCss:k,name:"Traslado Origen",data:(a==null?void 0:a.Movimiento)===10?s.TransladosI:s.TransladosE,fun:n,val:a["Traslado Origen"]}):e.jsx(M,{classCss:k,name:"Origen",data:p(),fun:n,val:a==null?void 0:a.Origen}),e.jsx(M,{classCss:k,name:"Producto",data:s.Producto,fun:n,val:a==null?void 0:a.Producto})]}),(a==null?void 0:a.Producto)===18&&(a==null?void 0:a.Movimiento)==2&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-6 gap-3 mt-2 mb-4 bg-gray-50 p-4 rounded-2xl max-sm:grid-cols-2 max-sm:gap-1 shadow",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"NSalida",className:"block text-sm text-gray-600",children:"# Salida"}),e.jsx("input",{type:"number",name:"NSalida",onChange:n,onKeyDown:m,className:y,value:a==null?void 0:a.NSalida})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"NViajes",className:"block text-sm text-gray-600",children:"# Viaje"}),e.jsx("input",{type:"number",name:"NViajes",onChange:n,onKeyDown:m,className:y,value:a==null?void 0:a.NViajes})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"Nbodega",className:"block text-sm text-gray-600",children:"# Bodega"}),e.jsx("input",{type:"text",name:"Nbodega",onChange:n,className:y,value:a==null?void 0:a.Nbodega})]}),e.jsxs("div",{className:"col-span-3 max-sm:col-span-2",children:[e.jsx("label",{htmlFor:"FechaPuerto",className:"block text-sm text-gray-600",children:"Fecha: Puerto"}),e.jsx("input",{name:"FechaPuerto",max:new Date().toISOString().split("T")[0],onChange:n,type:"date",className:`${y} p-3`,value:a==null?void 0:a.FechaPuerto})]}),e.jsxs("div",{className:"col-span-3 max-sm:col-span-2",children:[e.jsx("label",{htmlFor:"TolvaAsignada",className:"block text-sm text-gray-600",children:"# Tolva"}),e.jsxs("select",{name:"TolvaAsignada",className:`${y} p-3`,onChange:n,value:a==null?void 0:a.TolvaAsignada,children:[e.jsx("option",{value:"",children:"Seleccione una tolva"}),e.jsx("option",{value:1,children:"Tolva 1"}),e.jsx("option",{value:2,children:"Tolva 2"})]})]})]})}),(a==null?void 0:a.Movimiento)==2&&e.jsx(e.Fragment,{children:e.jsx("button",{className:te,onClick:()=>T(!0),children:"Agregar Marchamos"})}),v&&e.jsx(Ye,{...S})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm mt-4 max-sm:grid-cols-1",children:[e.jsx("button",{onClick:u,className:na,disabled:f,children:"Limpiar"}),e.jsx("button",{onClick:x,className:Se,disabled:f,children:"Cancelar"}),e.jsx("button",{onClick:w,className:Ce,disabled:f,children:f?"Guardando...":"Guardar"})]})]})})},Oa=x=>{const{hdlClose:n,hdlChange:s,fillData:o,typeBol:a,typeStructure:u,formBol:w,boletas:t,hdlSubmit:f,move:C,clean:d,isLoading:l,isLoadingDataOut:r,proceso:j,setAddMarchamos:D,marchamos:v}=x,[T,S]=c.useState("00lb"),[E,m]=c.useState(!1),[p,g]=c.useState(),[O,L]=c.useState(!1),W=()=>{w(P=>({...P,pesoOut:T.replaceAll("lb","")}))},Z=async()=>{const{valor:P}=await qe(),A=(t==null?void 0:t.pesoOut)-(t==null?void 0:t.pesoIn),$=t["Peso Teorico"]*P,F=Math.abs(A)-t["Peso Teorico"],G=Math.abs(Math.abs(A)-t["Peso Teorico"]),Q={pesoNeto:Math.abs(A),tolerancia:$,desviacion:F,pesoInicial:t==null?void 0:t.pesoIn};Q.fueraTol=G>$,m(!0),g(Q)};c.useEffect(()=>{const P=new WebSocket(ye);return P.onmessage=A=>{const $=A.data;S($)},P.onerror=()=>{S("No conectada")},()=>{P.close()}},[]);const R={setAddMarchamos:D,marchamos:v,setOpenMarchamos:L};return e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 p-4 sm:p-6 min-h-screen bg-opa-50",children:[e.jsx("div",{className:"bg-white w-full max-w-5xl rounded-2xl p-2 shadow-lg sm:w-[90%] md:w-[80%] lg:w-[60%] max-h-[95vh] overflow-y-auto boletas border-8 border-white",children:r?e.jsx(zs,{}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Boletas"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Creación de entrada y salida de material del ",new Date().toLocaleDateString()]})]}),e.jsx("div",{className:"my-2 p-2 bg-gray-100 rounded-lg border border-gray-300",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 max-sm:text-sm",children:"Peso en tiempo real báscula:"}),e.jsx("span",{className:"text-lg font-bold text-gray-900 max-sm:text-sm",children:T})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-10 p-2 place-content-center",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-y-2 sm:grid-cols-2",children:[e.jsx(M,{classCss:k,name:"Proceso",data:o.Proceso,fun:s,val:t==null?void 0:t.Proceso,stt:!0}),e.jsx(M,{classCss:k,name:"Producto",data:o.Producto,fun:s,val:t==null?void 0:t.Producto,stt:(t==null?void 0:t.Proceso)===0}),e.jsx(M,{classCss:k,name:"Socios",val:t==null?void 0:t.Socios,data:o.Clientes,fun:s,stt:!0},d),(t==null?void 0:t.Socios)==-998&&e.jsx(I,{data:y,name:"Cliente",fun:s,val:t==null?void 0:t.valueSocio,stt:!0}),(t==null?void 0:t.Socios)==-999&&e.jsx(I,{data:y,name:"Proveedor",fun:s,val:t==null?void 0:t.valueSocio,stt:!0}),Pe.map(P=>(t==null?void 0:t.Socios)!=-998&&(t==null?void 0:t.Socios)!=-999?e.jsx(M,{classCss:k,name:P,val:t==null?void 0:t[P],data:o[P],fun:s,stt:!0},P):e.jsx(I,{data:y,name:P,fun:s,val:t==null?void 0:t[P],stt:!0},P))]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 place-content-start",children:[e.jsx(M,{classCss:k,name:"Movimiento",val:t==null?void 0:t.Movimiento,data:t.Proceso===0?o.Flete:o.FleteS,fun:s,stt:t.Proceso===0}),C=="Traslado Interno"?e.jsx(sa,{bol:t,hdl:s,fill:o}):C=="Traslado Externo"?e.jsx(aa,{bol:t,hdl:s,fill:o}):e.jsx(Ue,{bol:t,hdl:s,fill:o,tipo:t==null?void 0:t.Proceso}),e.jsx(ta,{fun:W,hdlChange:s,val:t}),e.jsx(I,{data:y,name:"Peso Teorico",fun:s}),u==0?a==0?e.jsx(I,{data:y,name:"Orden de compra",fun:s,val:t["Orden de compra"]}):e.jsx(I,{data:y,name:"Documento",val:t.Documento,fun:s}):"",C=="Traslado Interno"||C=="Traslado Externo"?e.jsx(I,{data:y,name:"Orden de Transferencia",fun:s}):"",e.jsx(I,{data:y,name:"Observaciones",fun:s})]})]}),e.jsxs("div",{className:"px-3 flex",children:[e.jsx("button",{onClick:Z,className:te,children:"Previsualizar"}),(t==null?void 0:t.Proceso)==1&&e.jsx("button",{className:te,onClick:()=>L(!0),children:" Agregar Marchamos "})]}),e.jsx("hr",{className:"text-gray-300 mt-1"}),e.jsxs("div",{className:"mt-3 px-3 grid grid-cols-2 gap-2 justify-between max-sm:grid-rows-3 max-sm:grid-cols-1",children:[e.jsx("button",{onClick:n,className:Se,disabled:l,children:"Cancelar"}),e.jsx("button",{onClick:f,className:Ce,disabled:l,children:l?"Guardando...":"Guardar"})]}),O&&e.jsx(Ye,{...R})]})}),E&&e.jsx(Gs,{name:"Previsualizacion",data:p,hdClose:()=>m(!1)})]})},Fa=x=>{const{hdlClose:n,boletas:s,isLoad:o}=x,[a,u]=c.useState(!1),[w,t]=c.useState(!1),[f,C]=c.useState(!1),d=["Entrada de material","Salida de material"],l="Vacio",r=(s==null?void 0:s.pesoTeorico)*(s==null?void 0:s.porTolerancia),j=async()=>{const p=await fe(s==null?void 0:s.id,u,"yellow");p!=null&&p.msg&&ve.success("SE IMPRIMIO CORRECTAMENTE BOLETA AMARILLA")},D=async()=>{const p=await fe(s==null?void 0:s.id,t,"green");p!=null&&p.msg&&ve.success("SE IMPRIMIO CORRECTAMENTE BOLETA VERDE")},v=async()=>{const p=await fe(s==null?void 0:s.id,C,"pink");p!=null&&p.msg&&ve.success("SE IMPRIMIO CORRECTAMENTE BOLETA ROSADA")},T=()=>{const p=new Date(s==null?void 0:s.fechaInicio),g=new Date(s==null?void 0:s.fechaFin);if(isNaN(p)||isNaN(g))return"00:00:00";const O=g-p,L=Math.floor(O/1e3),W=Math.floor(L/3600),Z=Math.floor(L%3600/60),R=L%60;return`${String(W).padStart(2,"0")}:${String(Z).padStart(2,"0")}:${String(R).padStart(2,"0")}`},S=(s==null?void 0:s.proceso)===0&&((s==null?void 0:s.idMovimiento)===10||(s==null?void 0:s.idMovimiento)===11),E=S?s==null?void 0:s.pesoInicial:s!=null&&s.pesoInicial&&(s!=null&&s.pesoFinal)?(s==null?void 0:s.proceso)==0?s==null?void 0:s.pesoFinal:s==null?void 0:s.pesoInicial:0,m=S?s==null?void 0:s.pesoFinal:s!=null&&s.pesoInicial&&(s!=null&&s.pesoFinal)?(s==null?void 0:s.proceso)==0?s==null?void 0:s.pesoInicial:s==null?void 0:s.pesoFinal:0;return e.jsx("div",{className:"fixed inset-0 bg-opacity-50 z-50 min-h-screen overflow-auto ",children:e.jsx(Y.div,{initial:{scale:.1,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.4,opacity:0,y:50},transition:{duration:.7,ease:[.22,1,.36,1]},className:"bg-white flex items-center justify-center w-full min-w-[100vw] min-h-[100vh] max-sm:overflow-auto max-sm:min-h-[0px] shadow-lg overflow-y-auto boletas border-8 border-white max-sm:p-10",children:o?e.jsx("div",{className:"w-full p-5",children:e.jsx(Ks,{})}):e.jsxs("div",{className:"w-full p-5",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between gap-7",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800",children:["Boleta - # ",s==null?void 0:s.numBoleta]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Visualización general de la boleta"})]}),e.jsx("button",{className:"text-4xl",onClick:n,children:e.jsx(we,{})})]}),e.jsx("div",{className:"my-2 p-2 bg-gray-100 rounded-lg border border-gray-300",children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("span",{className:"text-lg font-bold text-gray-700 max-sm:text-sm",children:["Creacion de la boleta: ",s!=null&&s.fechaFin?new Date(s==null?void 0:s.fechaFin).toLocaleString("es-ES"):"Cargando..."]})})}),e.jsxs("div",{className:" grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-2 mt-5",children:[e.jsxs("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Datos de la boleta:"}),e.jsx("hr",{className:"text-gray-400 mb-4"}),e.jsxs("span",{className:"text-md text-gray-700",children:["Socio: ",s!=null&&s.socio?s==null?void 0:s.socio:"Cargando..."]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Transporte: ",s!=null&&s.empresa?s==null?void 0:s.empresa:"Cargando..."]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Placa: ",s!=null&&s.placa?s==null?void 0:s.placa:"Cargando..."]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Conductor: ",s!=null&&s.motorista?s==null?void 0:s.motorista:"Cargando..."]})]}),e.jsxs("div",{className:"flex flex-col gap-1 mt-4",children:[e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Ruta:"}),e.jsx("hr",{className:"text-gray-400 mb-4"}),e.jsxs("span",{className:"text-md text-gray-700",children:["Origen : ",s!=null&&s.origen?s==null?void 0:s.origen:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Destino: ",s!=null&&s.destino?s==null?void 0:s.destino:l]}),e.jsx("span",{className:"text-md font-bold text-gray-700 mt-4",children:"Traslado:"}),e.jsx("hr",{className:"text-gray-400 mb-2"}),e.jsxs("span",{className:"text-md text-gray-700",children:["Origen : ",s!=null&&s.trasladoOrigen?s==null?void 0:s.trasladoOrigen:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Destino: ",s!=null&&s.trasladoDestino?s==null?void 0:s.trasladoDestino:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Orden de transferencia: ",s!=null&&s.ordenDeTransferencia?s==null?void 0:s.ordenDeTransferencia:l]})]})]}),e.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Datos de la boleta:"}),e.jsx("hr",{className:"text-gray-400 mb-4"}),e.jsx("span",{className:"text-md text-gray-700 border-2 p-2 rounded-sm mb-4",children:parseInt(s==null?void 0:s.proceso)===0||parseInt(s==null?void 0:s.proceso)===1?d[parseInt(s==null?void 0:s.proceso)]:l}),e.jsxs("span",{className:"text-md text-gray-700",children:["Producto: ",s!=null&&s.producto?s==null?void 0:s.producto:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Movimiento: ",s!=null&&s.movimiento?s==null?void 0:s.movimiento:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Manifiesto: ",s!=null&&s.manifiesto?s==null?void 0:s.manifiesto:l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Orden de Compra: ",s!=null&&s.ordenDeCompra?s==null?void 0:s.ordenDeCompra:l]}),e.jsx("hr",{className:"text-gray-400 my-4"}),e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Tiempos:"}),e.jsxs("span",{className:"text-md text-gray-700",children:["Fecha Inicial: ",s!=null&&s.fechaInicio?new Date(s==null?void 0:s.fechaInicio).toLocaleString():l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Fecha Final: ",s!=null&&s.fechaInicio?new Date(s==null?void 0:s.fechaFin).toLocaleString():l]}),e.jsxs("span",{className:"text-md text-gray-700",children:["Duracion del proceso: ",T()]}),e.jsx("hr",{className:"text-gray-400 my-4"}),e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Marchamos:"}),e.jsxs("span",{className:"text-md text-gray-700 bg-gray-200 p-2 rounded-sm shadow-2xl",children:["Sellos:"," ",[s==null?void 0:s.sello1,s==null?void 0:s.sello2,s==null?void 0:s.sello3,s==null?void 0:s.sello4,s==null?void 0:s.sello5,s==null?void 0:s.sello6].filter(Boolean).join(", ")||"N/A"]})]})}),e.jsx("div",{className:"p-4 border-2 border-gray-300 rounded-lg",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-md font-bold text-gray-700",children:"Datos del Peso:"}),e.jsx("hr",{className:"text-gray-400 mb-4"}),(s==null?void 0:s.estado)=="Completado"?e.jsx("span",{className:"text-md text-white border-2 p-4 bg-green-900 rounded-sm mb-4",children:s==null?void 0:s.estado}):(s==null?void 0:s.estado)=="Cancelada"?e.jsx("span",{className:"text-md text-white border-2 p-4 bg-yellow-900 rounded-sm mb-4",children:s==null?void 0:s.estado}):e.jsx("span",{className:"text-md text-white border-2 p-4 bg-red-900 rounded-sm mb-4",children:s==null?void 0:s.estado}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Peso Tara:"}),e.jsxs("span",{children:[E," lb"]})]}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Peso Bruto:"}),e.jsxs("span",{children:[m," lb"]})]}),e.jsx("hr",{className:"text-gray-400"}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Peso Neto:"}),e.jsxs("span",{children:[s!=null&&s.pesoNeto?s==null?void 0:s.pesoNeto:0," lb"]})]}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Peso Teorico:"}),e.jsxs("span",{children:[s!=null&&s.pesoTeorico?s==null?void 0:s.pesoTeorico:0," lb"]})]}),e.jsx("hr",{className:"text-gray-400"}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"Desviación:"}),e.jsxs("span",{children:[s!=null&&s.desviacion?s==null?void 0:s.desviacion:0," lb"]})]}),e.jsx("hr",{className:"text-gray-400 my-2"}),e.jsxs("span",{className:"text-md text-gray-700 flex justify-between",children:[e.jsx("span",{children:"(Nota: Peso Tolerado)"}),e.jsxs("span",{children:["± ",parseFloat(r).toFixed(2)]})]}),e.jsx("span",{className:"text-md text-gray-700 mt-8",children:"Observaciones: "}),e.jsxs("span",{className:"text-md text-gray-700 border-2 border-gray-200 p-2",children:["🔺",s!=null&&s.observaciones?s==null?void 0:s.observaciones:l]})]})})]}),e.jsx("div",{className:"flex items-center justify-end gap-2 mt-4 max-sm:flex-col",children:(s==null?void 0:s.estado)!="Cancelada"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{name:"Imprimir",fun:j,isLoad:a,color:"bg-yellow-500 max-sm:w-full"}),e.jsx(ge,{name:"Imprimir",fun:v,isLoad:f,color:"bg-pink-500 max-sm:w-full"}),e.jsx(ge,{name:"Imprimir",fun:D,isLoad:w,color:"bg-green-500 max-sm:w-full"})]})}),e.jsx(Ca,{position:"top-center",toastOptions:{style:{background:"#955e37",color:"white"}}})]})})})},Ea=x=>{const{boletas:n,hdlClose:s,hdlSubmitCancel:o,hdlChange:a,isLoad:u}=x;return e.jsx(Y.div,{...Hs,className:"fixed inset-0 flex items-center justify-center bg-opacity-50 z-40 min-h-screen overflow-auto bg-opa-50",children:e.jsxs(Y.div,{...Ws,className:"bg-white min-w-[20vw] min-h-[20vh] max-w-[40vw] rounded-2xl max-sm:overflow-auto max-sm:min-h-[0px] shadow-lg overflow-y-auto boletas border-8 border-white px-10 py-5 max-sm:p-10",children:[e.jsxs("div",{className:"mb-1 flex justify-between gap-7",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Cancelar Boleta: #",n==null?void 0:n.Id," / ",n==null?void 0:n.Placa]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Advertencia: Estás a punto de cancelar una boleta de peso de carga. Esta acción es crítica y no se puede deshacer. "})]}),e.jsx("div",{className:"items-start h-full",children:e.jsx("button",{className:"text-4xl",onClick:s,children:e.jsx(we,{})})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(I,{data:y,name:"Motivo",fun:a})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{disabled:u,className:ca,onClick:o,children:u?e.jsx(Zs,{}):e.jsx("span",{children:"Cancelar Boleta"})})})]})})},Ye=({marchamos:x=[],setAddMarchamos:n,setOpenMarchamos:s})=>{const[o,a]=c.useState(""),u=()=>{if(o.trim()===""||o.length!=6||x.length==6)return;const d=[...x,o];n(d),a("")},w=d=>{const{value:l}=d.target;l.length>6||l<0||a(d.target.value)},t=d=>{["e","E","+","-",".",","].includes(d.key)&&d.preventDefault()},f=d=>{d.key==="Enter"&&u()},C=d=>{const l=x.filter((r,j)=>j!==d);n(l)};return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:[e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl p-6 shadow-2xl max-h-[90vh] overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"mb-2",children:e.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Adicionar Marchamos"})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{className:"w-full text-sm px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-amber-400 focus:ring-2 focus:ring-amber-100 transition-all duration-200 outline-none text-gray-700 placeholder-gray-400",placeholder:"Ingrese nuevo marchamo...",value:o,type:"number",onChange:w,onKeyDown:t,onKeyPress:f}),e.jsx("button",{onClick:u,disabled:o.trim()==="",className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-[#725033] hover:bg-[#68513d] disabled:bg-gray-300 disabled:cursor-not-allowed text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:"Agregar"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h3",{className:"text-sm font-semibold text-gray-700",children:["Marchamos (",x.length,")"]})}),e.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2 pr-2 custom-scrollbar border border-gray-200 p-4 rounded-xl",children:x.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{className:"font-medium",children:"No hay marchamos agregados"}),e.jsx("p",{className:"text-sm",children:"Agregue su primer marchamo arriba"})]}):x.map((d,l)=>e.jsxs("div",{className:"group flex items-center justify-between bg-gradient-to-r from-gray-50 to-gray-100 hover:from-blue-50 hover:to-blue-100 px-2 py-1 rounded-xl border border-gray-200 hover:border-blue-300 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx("span",{className:"text-gray-700 font-normal text-sm flex-1 mr-3",children:d}),e.jsx("button",{onClick:()=>C(l),className:"opacity-0 group-hover:opacity-100 bg-red-500 hover:bg-red-600 text-white w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",title:"Eliminar marchamo",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},l))})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsx("button",{className:"w-full bg-[] rounded-sm p-1 hover:scale-105",onClick:()=>s(!1),children:"Finalizar"})})]}),e.jsx("style",{jsx:!0,children:`
        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #cbd5e1;
          border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #94a3b8;
        }
      `})]})},Aa=({hdClose:x,hdlSubmit:n,isLoading:s})=>e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opa-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-2xl max-w-md w-full mx-4 border border-gray-100 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx(Ve,{className:"text-3xl text-red-500 animate-pulse"}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 tracking-wide",children:"ALERTA"}),e.jsx(Ve,{className:"text-3xl text-red-500 animate-pulse"})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("p",{className:"text-gray-700 text-lg",children:["¿Está seguro que desea ingresar la boleta"," ",e.jsx("span",{className:"text-red-600 font-bold mt-2 text-xl",children:" SIN MARCHAMOS?"})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-end",children:[e.jsx("button",{onClick:x,"aria-label":"Cancelar operación",disabled:s,className:`px-6 py-3 w-full text-gray-600 font-medium rounded-lg border border-gray-300 \r
                       transition-all duration-200 ease-in-out \r
                       hover:bg-gray-50 hover:border-gray-400 hover:scale-[1.02]\r
                       focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2\r
                       active:scale-95`,children:"Cancelar"}),e.jsx("button",{onClick:n,"aria-label":"Confirmar ingreso sin marchamos",disabled:s,className:`px-6 py-3 w-full text-white font-semibold bg-gradient-to-r from-red-600 to-red-700 \r
                       rounded-lg shadow-lg transition-all duration-200 ease-in-out \r
                       hover:from-red-700 hover:to-red-800 hover:scale-[1.02] hover:shadow-xl\r
                       focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2\r
                       active:scale-95`,children:s?"PROCESANDO...":"CONFIRMAR"})]})]})}),qa=()=>{const[x,n]=c.useState(!1),[s,o]=c.useState(!1),[a,u]=c.useState(!1),[w,t]=c.useState(!1),[f,C]=c.useState(!1),[d,l]=c.useState(oa),[r,j]=c.useState(J),[D,v]=c.useState(ae),[T,S]=c.useState(""),[E,m]=c.useState(""),[p,g]=c.useState(0),[O,L]=c.useState(),[W,Z]=c.useState(),[R,P]=c.useState(""),[A,$]=c.useState(""),[F,G]=c.useState(1),[Q,Me]=c.useState(!1),[ke,_]=c.useState(""),[_e,Te]=c.useState(!1),[Xe,Je]=c.useState(),[Qe,re]=c.useState(!1),[U,ne]=c.useState(""),[K,z]=c.useState([]),[be,b]=c.useState(!1),[Ba,es]=c.useState(!1),[ss,ee]=c.useState(!1),[as,ce]=c.useState(!1),[ie,oe]=c.useState(),[ts,rs]=c.useState(),[le,se]=c.useState(!1),[ns,H]=c.useState(!1),[cs,X]=c.useState(),[Ie,V]=c.useState(),is=()=>{n(!1),X(!1),ee(!1),se(!1),m(""),S(""),_("")},De=()=>{n(!x),j(J),v(ae),z([]),q("","","","","",v),S("")},Oe=()=>{ee(!1),se(!1),j(J),v(ae),q("","","","","",v),_(""),S(""),m(""),z([])},de=i=>{const{name:h,value:N,data:pe}=i.target;j(B=>({...B,[h]:N})),h=="Proceso"&&(_(N),N==0&&j(B=>({...B,"Orden de compra":"",Origen:""})),N==1&&j(B=>({...B,Documento:"",Destino:""}))),h=="Placa"&&((r==null?void 0:r.Socios)==-998||(r==null?void 0:r.Socios)==-999)&&S(N),h=="Movimiento"&&m(pe),h=="Movimiento"&&N!=2&&(z([]),j(B=>({...B,NSalida:"",NViajes:"",Nbodega:"",FechaPuerto:"",TolvaAsignada:""}))),h=="Estado"&&N==1&&j(B=>({...B,Proceso:1})),h=="Socios"&&(N==-998||N==-999)&&j(B=>({...B,Placa:"",Transportes:"Transportes X",Motoristas:"",Cliente:"",Proveedor:""}))},me=()=>{S(""),_(""),m(""),j(J),q("","","","","",v),Ne(L,u,R,A,F),He(Z,Me,R,A,F)},xe=()=>{const i=p+1;j(J),v(ae),z([]),S(""),g(i),q("","","","","",v)},os=async()=>{const i=ua(r,K);if(ha(H,i,V,K)){const N=await pa(i,o);if(N!=null&&N.err){V(N==null?void 0:N.err),H(!0);return}X(!0),console.log(N==null?void 0:N.msg),V("agregar nueva boleta"),z([]),n(!1),me()}},ls=i=>{ee(!0),xa(j,i,m,t)},Fe=async()=>{const{valor:i}=await qe(),h=We(r,i,K);return{isCorrect:va(H,h,V,r==null?void 0:r.pesoIn),response:h,valor:i}},Ee=async i=>{o(!0);try{return await ya(i,r.idBoleta,o),!0}catch(h){return console.error(h),!1}finally{o(!1)}},ds=async()=>{const{isCorrect:i,response:h}=await Fe();return i?await Ee(h):!1},Ae=()=>{V("dar salida a boleta"),ee(!1),b(!1),me(),X(!0),z([])},ms=async()=>{const{isCorrect:i,response:h}=await Fe();if(!i)return;if(K.length===0&&(r==null?void 0:r.Proceso)===1){b(!0);return}await Ee(h)&&Ae()},xs=async()=>{await ds()&&(G(1),b(!1),Ae())},us=()=>{b(!1),o(!1)},hs=async()=>{se(!0),j(i=>({...i,Proceso:1,Movimiento:1})),_(1),await q(1,T,r.Socios,r.Transportes,r.Motoristas,v)},ps=async()=>{const i=We(r,0,K),h={...i,pesoInicial:r==null?void 0:r.pesoIn,Cliente:r==null?void 0:r.Cliente};ga(H,i,V,r==null?void 0:r.pesoIn)&&(await ja(h,o),X(!0),V("agregar nueva boleta"),se(!1),me())},gs=i=>{if(F>0){const h=F+i;if(h==0||h>O.pagination.totalPages)return;G(h)}},js=i=>{if(F>0){const h=F+i;if(h==0||h>W.pagination.totalPages)return;G(h)}},fs=()=>{Te(!1)},Ns=async i=>{Te(!0);const h=await ma(i==null?void 0:i.Id,C);Je(h)},vs=()=>{ce(!1)},ys=i=>{ce(!0),oe(i),console.log(i)},ws=i=>{const{name:h,value:N}=i.target;oe(pe=>({...pe,[h]:N}))},Ss=async()=>{if(!ie.Motivo){H(!0),V("Debe de ingresar un motivo");return}await fa(ie,rs),ce(!1),oe(""),ue(),G(1),he()},Cs=()=>{re(!1),ne("")},Ps=i=>{ne(i),re(!0)},Ms=async()=>{const i=await Na(U==null?void 0:U.Id,es);if(i.msg){X(!0),V(i.msg),re(!1),ne("");return}if(i.msgErr){H(!0),V(i.msgErr);return}},ue=c.useCallback(()=>{q(le?1:"",T,r.Socios,r.Transportes,r.Motoristas,v),Ne(L,u,R,A,F),la(l)},[T,r.Socios,r.Transportes,r.Motoristas,le]),he=c.useCallback(()=>{Ne(L,u,R,A,F),He(Z,Me,R,A,F)},[R,A,F]);c.useEffect(()=>{he()},[he]),c.useEffect(()=>{ue()},[ue]);const ks={hdlClose:De,hdlChange:de,fillData:D,typeBol:r==null?void 0:r.Proceso,typeStructure:r==null?void 0:r.Estado,formBol:j,boletas:r,hdlClean:xe,hdlSubmit:os,clean:p,isLoading:s,setAddMarchamos:z,marchamos:K},Ts={hdlClose:Oe,hdlChange:de,fillData:D,typeBol:r==null?void 0:r.Proceso,typeStructure:r==null?void 0:r.Estado,formBol:j,boletas:r,hdlClean:xe,hdlSubmit:ms,move:E,clean:p,isLoading:s,proceso:ke,isLoadingDataOut:w,setAddMarchamos:z,marchamos:K},Is={hdlClose:Oe,hdlChange:de,fillData:D,typeBol:r==null?void 0:r.Proceso,typeStructure:r==null?void 0:r.Estado,formBol:j,boletas:r,hdlClean:xe,hdlSubmit:ps,move:E,clean:p,isLoading:s,proceso:ke},Ds={boletas:O,sts:l,hdlOut:ls,isLoad:a,isLoadCompletadas:Q,setSearch:P,setSearchDate:$,pagination:F,setPagination:G,handlePagination:gs,completadas:W,handlePaginationCompletadas:js,hdlOpenDetails:Ns,hdlCancel:ys,funReimprimir:Ps},Os={ticketNumber:U==null?void 0:U.Placa,hdClose:Cs,hdlSubmit:Ms},Fs={hdClose:us,hdlSubmit:xs,isLoading:s};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between w-full gap-5 max-sm:flex-col max-md:flex-col mb-4",children:[e.jsxs("div",{className:"parte-izq",children:[e.jsx("h1",{className:"text-3xl font-bold titulo",children:"Boletas"}),e.jsxs("h1",{className:"text-gray-600 max-sm:text-sm",children:[" ","Generación y visualización de las boletas de Báscula"]})]}),e.jsxs("div",{className:"parte-der flex items-center justify-center gap-3 max-sm:text-sm max-sm:flex-col",children:[e.jsx($e,{className:"bg-amber-9001",name:"Boleta Especial",fun:hs}),e.jsx(Js,{name:"Nueva boleta",fun:De})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 lg:grid-cols-3 mt-5",children:[e.jsx(je,{data:d.entrada,name:"Total de entradas de material",title:"Entradas (Hoy)"}),e.jsx(je,{data:d.salida,name:"Total de salidas de material",title:"Salidas (Hoy)"}),e.jsx(je,{data:d.pendientes,name:"Total de salidas de material",title:"Pendientes"})]}),e.jsx("div",{className:"mt-6 bg-white shadow rounded-xl px-6 py-7",children:e.jsx(ka,{...Ds})}),x&&e.jsx(Da,{...ks},p),ss&&e.jsx(Oa,{...Ts},p),le&&e.jsx(Ia,{...Is}),ns&&e.jsx(Ys,{name:Ie,hdClose:()=>H(!1)}),cs&&e.jsx(_s,{name:Ie,hdClose:is}),be&&e.jsx(Aa,{...Fs}),e.jsxs(da,{children:[_e&&e.jsx(Fa,{hdlClose:fs,boletas:Xe,isLoad:f}),as&&e.jsx(Ea,{boletas:ie,hdlClose:vs,hdlSubmitCancel:Ss,hdlChange:ws,isLoad:ts}),Qe&&e.jsx(Xs,{...Os})]})]})};export{qa as default};
