import{j as e,o as y,p as G,q,s as V,r as o,t as ce,u as de,v as me,w as xe,x as ue,y as he,z as ge,B as pe,N as je,A as be,C as ve}from"./index-DqpGZtZS.js";import{C as L}from"./index-CWU1N5XH.js";import{I as x,S as k,F as Ne}from"./inputs-Cck7JMqO.js";import{g as M,a as F,T as ye,p as fe,u as Ce}from"./tables-DueWUWbv.js";import{c as r,a as z,b as H,d as $}from"./boletas-CuDdO80P.js";import{P as we}from"./buttons-DpToUdmo.js";import"./react-select.esm-DAYL3PhH.js";import"./index-BQG4GO_-.js";import"./regex-DItgc77W.js";const J="fixed inset-0 flex items-center justify-center bg-opacity-50 z-40 min-h-screen overflow-auto bg-opa-50",K="bg-white min-h-[20vh] max-w-[90vw] md:max-w-[30vw] max-h-[95vh] rounded-2xl max-sm:overflow-auto max-sm:min-h-[0px] shadow-lg overflow-y-auto boletas border-8 border-white px-10 py-5 max-sm:p-10",Q=[{id:1,nombre:"BASCULA"},{id:2,nombre:"CONTABILIDAD"},{id:3,nombre:"TOLVA"},{id:4,nombre:"ADMINISTRADOR"}],Se=[{id:1,nombre:"ACTIVO"},{id:2,nombre:"INACTIVO"}],Ae=n=>{const{hdlClose:i,handleChange:l,formUsers:a,hdlCancel:c,hdlSaveUser:u}=n;return e.jsx(y.div,{...G,className:J,children:e.jsxs(y.div,{...q,className:K,children:[e.jsxs("div",{className:"mb-1 flex justify-between gap-7",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Agregar Nuevo Usuario"})}),e.jsx("div",{className:"items-start h-full",children:e.jsx("button",{onClick:i,className:"text-4xl",children:e.jsx(V,{className:"hover:scale-105"})})})]}),e.jsxs("div",{className:"mt-2 mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("strong",{children:"Advertencia"}),": Estás a punto de agregar un nuevo usuario que tendra acceso a las diferentes sistemas de Baprosa."," "]}),e.jsx("hr",{className:"text-gray-300 my-2"})]}),e.jsx("div",{className:"mb-1 flex justify-between gap-7",children:e.jsxs("div",{className:"grid grid-cols-1 items-center w-full space-y-2",children:[e.jsx(x,{data:r,name:"Nombre",fun:l,val:a==null?void 0:a.Nombre}),e.jsx(x,{data:r,name:"Usuario",fun:l,val:a==null?void 0:a.Usuario}),e.jsx(k,{classCss:z,name:"Tipo",data:Q,fun:l,val:a==null?void 0:a.Tipo}),e.jsx(x,{data:r,name:"Gmail",fun:l,val:a==null?void 0:a.Gmail}),e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Contraseña"}),e.jsx("input",{type:"password",id:"Contraseña",name:"Contraseña",className:r,placeholder:"Ingrese contraseña",required:!0,onChange:l})]})}),e.jsx("hr",{className:"text-gray-300 my-2 "}),e.jsxs("div",{className:"grid grid-cols-2 mt-4 gap-2",children:[e.jsx("button",{className:H,onClick:c,children:"Cancelar"}),e.jsx("button",{className:$,onClick:u,children:"Agregar"})]})]})})},Ue=n=>{const{hdlClose:i,handleChange:l,formUsers:a,hdlCancel:c,handleUpdateUser:u}=n;return e.jsx(y.div,{...G,className:J,children:e.jsxs(y.div,{...q,className:K,children:[e.jsxs("div",{className:"flex justify-between gap-7",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Editar Usuario"})}),e.jsx("div",{className:"items-start h-full",children:e.jsx("button",{onClick:i,className:"text-4xl",children:e.jsx(V,{className:"hover:scale-105"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500 flex flex-col",children:e.jsxs("span",{children:[e.jsx("strong",{children:"Nota:"})," No puede ver la contraseña del usuario pero puede cambiarla."]})}),e.jsx("hr",{className:"text-gray-300 my-2"})]}),e.jsx("div",{className:"mb-1 flex justify-between gap-7",children:e.jsxs("div",{className:"grid grid-cols-1 items-center w-full space-y-2",children:[e.jsx(x,{data:r,name:"Nombre",fun:l,val:a==null?void 0:a.Nombre}),e.jsx(x,{data:r,name:"Usuario",fun:l,val:a==null?void 0:a.Usuario}),e.jsx(k,{classCss:z,name:"Tipo",data:Q,fun:l,val:a==null?void 0:a.Tipo}),e.jsx(x,{data:r,name:"Gmail",fun:l,val:a==null?void 0:a.Gmail}),e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Ingrese una nueva contraseña"}),e.jsx("input",{type:"password",id:"Contraseña",name:"nuevaContraseña",className:r,placeholder:"Ingrese la nueva contraseña",required:!0,onChange:l}),e.jsx(k,{classCss:z,name:"Estado",data:Se,fun:l,val:a==null?void 0:a.Estado})]})}),e.jsx("hr",{className:"text-gray-300 my-2 "}),e.jsxs("div",{className:"grid grid-cols-2 mt-4 gap-2",children:[e.jsx("button",{className:H,onClick:c,children:"Cancelar"}),e.jsx("button",{className:$,onClick:u,children:"Modificar"})]})]})})},Ie={BASCULA:1,CONTABILIDAD:2,TOLVA:3,ADMINISTRADOR:4},Ee={Activo:1,Inactivo:2},p=({icon:n,title:i,value:l,color:a})=>e.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6 transition-all duration-300 hover:shadow-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${a} mr-4`,children:n}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:i}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800",children:l})]})]})}),Le=()=>{const n={Nombre:"",Usuario:"",Gmail:"",Tipo:"",Contraseña:"",Estado:""},i={total:0,admins:0,bascula:0,tolva:0,contabilidad:0},l={search:"",tipo:"",estado:""},[a,c]=o.useState(),[u,f]=o.useState(!1),[B,j]=o.useState(!1),[s,C]=o.useState(l),[d,w]=o.useState(1),[b,h]=o.useState(n),[W,S]=o.useState(!1),[X,A]=o.useState(!1),[O,v]=o.useState(!1),[Y,N]=o.useState(!1),[g,U]=o.useState(i),Z=t=>{if(d>0){const m=d+t;if(m==0||m>a.pagination.totalPages)return;w(m)}},_=()=>{w(1)};o.useEffect(()=>{M(U)},[]),o.useEffect(()=>{F(c,f,s==null?void 0:s.search,s==null?void 0:s.tipo,s==null?void 0:s.estado,d)},[s==null?void 0:s.search,s==null?void 0:s.tipo,s==null?void 0:s.estado,d]);const R=t=>{const{name:m,value:E}=t.target;h(T=>({...T,[m]:E}))},I=t=>{const{name:m,value:E}=t.target;C(T=>({...T,[m]:E})),_()},ee=()=>C(l),P=()=>{j(!1),N(!1),h(n)},D=()=>{j(!1),N(!1),h(n)},se=async()=>{const t=await fe(b);if(t.msgErr){A(!0),v(t.msgErr);return}S(!0),v(t.msg),M(U),C(l),F(c,f,s==null?void 0:s.search,s==null?void 0:s.tipo,s==null?void 0:s.estado,d)},ae=()=>A(!1),te=()=>{j(!1),N(!1),h(n),S(!1)},le=t=>{N(!0),h({Nombre:t.name,Usuario:t.usuarios,Gmail:t.email,Tipo:Ie[t.tipo],Estado:Ee[t.estado],Id:t.id})},oe={hdlClose:P,handleChange:R,formUsers:b,hdlCancel:D,handleUpdateUser:async()=>{const t=await Ce(b);if(t.msgErr){v(t.msgErr),A(!0);return}v(t.msg),M(U),F(c,f,s==null?void 0:s.search,s==null?void 0:s.tipo,s==null?void 0:s.estado,d),S(!0)}},ne={name:O,hdClose:ae},re={name:O,hdClose:te},ie={hdlClose:P,handleChange:R,formUsers:b,hdlCancel:D,hdlSaveUser:se};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between w-full gap-5 max-sm:flex-col max-md:flex-col mb-4",children:e.jsxs("div",{className:"parte-izq",children:[e.jsx("h1",{className:"text-3xl font-bold titulo",children:"Usuarios"}),e.jsxs("h1",{className:"text-gray-600 max-sm:text-sm",children:[" ","Administración de los usuarios permitidos por el sistema."]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 mb-3 auto-cols-auto",children:[e.jsx(p,{icon:e.jsx(L,{size:24,className:"text-white"}),title:"Usuarios",value:g.total,color:"bg-blue-500"}),e.jsx(p,{icon:e.jsx(ce,{size:24,className:"text-white"}),title:"Administradores",value:g.admins,color:"bg-amber-500"}),e.jsx(p,{icon:e.jsx(de,{size:24,className:"text-white"}),title:"Bascula",value:g.bascula,color:"bg-amber-500"}),e.jsx(p,{icon:e.jsx(Ne,{size:24,className:"text-white"}),title:"Tolva",value:g.tolva,color:"bg-amber-500"}),e.jsx(p,{icon:e.jsx(me,{size:24,className:"text-white"}),title:"Contabilidad",value:g.contabilidad,color:"bg-amber-500"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-3 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filtros"}),e.jsxs("button",{className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",onClick:ee,children:[e.jsx(xe,{size:16,className:"mr-1"}),e.jsx("span",{className:"text-sm",children:"Restablecer"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3   gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(ue,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5",placeholder:"Buscar...",onChange:I,value:s==null?void 0:s.search,name:"search"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(L,{size:18,className:"text-gray-400"})}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5",name:"tipo",onChange:I,value:s==null?void 0:s.tipo,children:[e.jsx("option",{value:"",children:"Seleccione tipo de usuario"}),e.jsx("option",{value:1,children:"Administrador"}),e.jsx("option",{value:2,children:"Bascula"}),e.jsx("option",{value:3,children:"Tolva"}),e.jsx("option",{value:4,children:"Contabilidad"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx(he,{size:18,className:"text-gray-400"})}),e.jsxs("select",{className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5",name:"estado",onChange:I,value:s==null?void 0:s.estado,children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:1,children:"Activos"}),e.jsx("option",{value:2,children:"Inactivos"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-3 border border-gray-200",children:[e.jsxs("div",{className:"py-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Usuarios registrados"}),e.jsxs("button",{onClick:()=>j(!B),className:"flex items-center px-4 py-3 bg-[#4f3627] text-white rounded-lg hover:bg-[#4f3627ce] transition-colors",children:[e.jsx(ge,{size:18,className:"mr-2"}),"Agregar Usuario"]})]}),e.jsx("div",{children:u?e.jsx(pe,{}):!a||a.data.length===0?e.jsx(je,{}):e.jsx(ye,{datos:a.data,fun:le})}),e.jsx("div",{className:"p-4 mt-2 border-t border-gray-300",children:a&&a.pagination.totalPages>1&&e.jsx(we,{pg:d,sp:w,hp:Z,dt:a})})]})]}),B&&e.jsx(Ae,{...ie}),X&&e.jsx(be,{...ne}),W&&e.jsx(ve,{...re}),Y&&e.jsx(Ue,{...oe})]})};export{Le as default};
