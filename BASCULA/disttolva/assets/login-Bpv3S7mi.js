import{j as e,Q as w,r as l,T as k,V as S,U as I,W as C,a,X as g}from"./index-DqpGZtZS.js";const M=({vMsg:n})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center p-4 mb-4 text-sm text-yellow-800 rounded-lg bg-yellow-50 dark:bg-gray-800 dark:text-yellow-300",role:"alert",children:[e.jsx("svg",{className:"shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})}),e.jsx("span",{className:"sr-only",children:"Info"}),e.jsxs("div",{className:"max-w-72",children:[e.jsx("span",{className:"font-medium",children:"Alerta!"})," ",e.jsx("span",{children:n})]})]})}),E=()=>{const n=w(),[i,c]=l.useState(!1),[h,d]=l.useState({usuarios:"",contrasena:""}),[m,b]=l.useState(),p=t=>{d(s=>({...s,usuarios:t.target.value}))},f=t=>{d(s=>({...s,contrasena:t.target.value}))},x=async()=>{try{c(!0);const s=await(await fetch(`${I}login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).json(),j=(y,N,v)=>{const r=new Date;r.setMinutes(r.getMinutes()+C);const o={expires:r};a.set("token",y,o),a.set("type",N,o),a.set("name",v,o)};s.token&&g[s.type]&&(j(s.token,s.type,s.name),n(g[s.type])),s.msg&&(b(s.msg),a.remove("token"),console.log(s.msg))}catch(t){console.log(t)}finally{c(!1)}},u=t=>{t.key=="Enter"&&x()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"title justify-items-center items-center content-center min-h-screen mozila-firefox max-sm:p-6",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h1",{className:"font-bold text-4xl text-[#955e37]",children:"Baprosa"}),e.jsx("h3",{className:"font-medium text-gray-500",children:"Sistema de gestion de bascula"})]}),e.jsxs("div",{className:"bg-white p-10 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-semibold text-2xl mb-0.5",children:"Iniciar Sesión"}),e.jsx("h3",{className:"text-gray-500",children:"Ingrese sus credenciales para acceder al Sistema"})]}),e.jsxs("div",{className:"mt-7",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Usuario"}),e.jsx(k,{className:"absolute mt-3.5 ml-3.5"}),e.jsx("input",{onChange:p,onKeyDown:u,type:"usuario",id:"email",className:"bg-gray-50 border pl-10 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#955e37] focus:border-[#955e37] block w-full p-2.5 ",placeholder:"Ingrese su usuario",required:!0})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Contraseña"}),e.jsx(S,{className:"absolute mt-3.5 ml-3.5"}),e.jsx("input",{onChange:f,onKeyDown:u,type:"password",id:"contra",className:"bg-gray-50 border pl-10 border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-[#955e37] focus:border-[#955e37] block w-full p-2.5 ",placeholder:"Ingrese su contraseña",required:!0})]}),m&&e.jsx(M,{vMsg:m}),e.jsx("div",{className:"w-full mb-6",children:e.jsx("button",{onClick:x,type:"submit",className:"text-white bg-[#955e37] hover:bg-[#b4927a] focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center w-full",disabled:i,children:i?"Iniciando Sessión...":"Iniciar Sessión"})}),e.jsx("div",{className:"w-full border-amber-200",children:e.jsx("h3",{className:"text-gray-600 font-medium text-sm text-center",children:"©2025 Baprosa. Todos los derechos reservados."})})]})]})]})})};export{E as default};
