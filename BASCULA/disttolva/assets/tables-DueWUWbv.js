import{U as n,a as c,j as r,O as x}from"./index-DqpGZtZS.js";import{r as h}from"./regex-DItgc77W.js";const u=["VACIO","BASCULA","CONTABILIDAD","TOLVA","ADMINISTRADOR"],g=[0,!0,!1],j=async(t,a)=>{try{a(!0);const e=await fetch(`${n}admin/metrics`,{method:"GET",headers:{Authorization:c.get("token")}});if(!e.ok)throw new Error("Error en la respuesta de la API");const o=await e.json();t(o[0])}catch(e){console.error("Error al obtener las metricas:",e)}finally{a(!1)}},A=async(t,a)=>{try{a(!0);const e=await fetch(`${n}admin/spaceTables`,{method:"GET",headers:{Authorization:c.get("token")}});if(!e.ok)throw new Error("Error en la respuesta de la API");const o=await e.json();t(o)}catch(e){console.error("Error al obtener las metricas:",e)}finally{a(!1)}},T=async(t,a,e,o,i,s,l)=>{try{a(!0);const d=await fetch(`${n}admin/logs?cat=${e}&user=${o}&search=${i}&page=${s}&date=${l}`,{method:"GET",headers:{Authorization:c.get("token")}});if(!d.ok)throw new Error("Error en la respuesta de la API");const p=await d.json();t(p)}catch(d){console.error("Error al obtener las metricas:",d)}finally{a(!1)}},k=async(t,a)=>{try{a(!0);const e=await fetch(`${n}admin/stats`,{method:"GET",headers:{Authorization:c.get("token")}});if(!e.ok)throw new Error("Error en la respuesta de la API");const o=await e.json();t(o)}catch(e){console.error("Error al obtener las metricas:",e)}finally{a(!1)}},m=async t=>{try{const a=await fetch(`${n}admin/usuarios`,{method:"GET",headers:{Authorization:c.get("token")}});if(!a.ok)throw new Error("Error en la respuesta de la API");const e=await a.json();t(e)}catch(a){console.error("Error al obtener las metricas:",a)}},$=async(t,a,e,o,i,s)=>{try{a(!0);const l=await fetch(`${n}usuarios?search=${e}&tipo=${o}&estado=${i}&page=${s}`,{method:"GET",headers:{Authorization:c.get("token")}});if(!l.ok)throw new Error("Error en la respuesta de la API");const d=await l.json();t(d)}catch(l){console.error("Error al obtener las metricas:",l)}finally{a(!1)}},N=async t=>{const a={name:t==null?void 0:t.Nombre,usuarios:t==null?void 0:t.Usuario,email:t==null?void 0:t.Gmail,tipo:u[t==null?void 0:t.Tipo],contrasena:t==null?void 0:t.Contraseña};if(!a.name||!a.usuarios||!a.tipo||!a.contrasena)return{msgErr:"datos del formulario se encuentan vacia"};if(!h.test(a.email)&&a.email)return{msgErr:"correo permite letras, números, puntos, guiones. Además de ir acompañado de un @dominio.es / @dominio.com"};try{const e=await fetch(`${n}usuarios/`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:c.get("token")}});if(!e.ok)throw new Error("Error en la respuesta de la API");return await e.json()}catch(e){console.error("Error al obtener los datos:",e)}},O=async t=>{const a={name:t==null?void 0:t.Nombre,usuarios:t==null?void 0:t.Usuario,email:t==null?void 0:t.Gmail,tipo:u[t==null?void 0:t.Tipo],...t!=null&&t.nuevaContraseña?{contrasena:t==null?void 0:t.nuevaContraseña}:{},estado:g[t==null?void 0:t.Estado]};if(!h.test(a.email)&&a.email)return{msgErr:"correo permite letras, números, puntos, guiones. Además de ir acompañado de un @dominio.es / @dominio.com"};try{const e=await fetch(`${n}usuarios/${t==null?void 0:t.Id}`,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:c.get("token")}});if(!e.ok)throw new Error("Error en la respuesta de la API");const o=await e.json();if(e.ok)return o}catch(e){console.error("Error al obtener los datos:",e)}},F=async t=>{try{const a=await fetch(`${n}usuarios/stats`,{method:"GET",headers:{Authorization:c.get("token")}});if(!a.ok)throw new Error("Error en la respuesta de la API");const e=await a.json();t(e)}catch(a){console.error("Error al obtener las metricas:",a)}},y={COMPLETO:"bg-white",ADVERTENCIA:"bg-yellow-200",ERROR:"bg-red-200"},E={Activo:"bg-green-200",Inactivo:"bg-red-100"},v=({datos:t=[{}],fun:a})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"relative overflow-x-auto min-h-[400px]",children:r.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-700 dark:text-gray-400",children:[r.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-[#FFFDF5]",children:r.jsx("tr",{children:Object.keys(t[0]).map((e,o)=>r.jsx("th",{scope:"col",className:`px-6 py-3 text-gray-700 ${o===0?"text-left":"text-center"}`,children:e},o))})}),r.jsx("tbody",{children:t.map((e,o)=>r.jsx("tr",{className:`${e.categoria&&y[e==null?void 0:e.categoria]} border-b border-gray-200 hover:bg-[#FDF5D4] rounded-2xl`,children:Object.values(e).map((i,s)=>r.jsx("td",{className:`px-6 py-3 text-gray-700 ${s===0?"text-left":"text-center"}`,children:i},s))},o))})]})})}),S=({datos:t=[{}],fun:a})=>r.jsx(r.Fragment,{children:r.jsx("div",{className:"relative overflow-x-auto min-h-[400px]",children:r.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-700 dark:text-gray-400",children:[r.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-[#FFFDF5]",children:r.jsxs("tr",{children:[Object.keys(t[0]).map((e,o)=>r.jsx("th",{scope:"col",className:"px-2 py-3 text-gray-700",children:e},o)),r.jsx("th",{children:"Editar"})]})}),r.jsx("tbody",{children:t.map((e,o)=>r.jsxs("tr",{className:`${(e==null?void 0:e.estado)&&E[e==null?void 0:e.estado]} border-b border-gray-200 hover:bg-[#FDF5D4] rounded-2xl`,children:[Object.values(e).map((i,s)=>r.jsx("td",{className:"px-2 py-3 text-gray-700",children:i},s)),r.jsx("td",{className:"text-center",children:r.jsx("button",{onClick:()=>a(e),className:"text-center text-xl text-black",children:r.jsx(x,{})})})]},o))})]})})});export{S as T,$ as a,T as b,k as c,m as d,v as e,j as f,F as g,A as h,N as p,O as u};
